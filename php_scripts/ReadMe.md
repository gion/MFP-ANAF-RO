Aici gasiti scripturi legate de ***eGuvernare***

Daca aveti nevoie de **cursul BNR** pentru o ***valuta*** anume(***interogarare punctuala***) probabil ca acest [**github-repository**](https://github.com/WPPlugins/curs-valutar-bnr/blob/master/curs_valutar_bnr.php) va poate fi de ajutor;
Nu este vorba de o interogare punctuala(adica pentru o valuta anume) dar probabil ca este usor de obtinut si o interogare punctuala daca studiati acest cod in detaliu;
S-ar putea ca acest [cod](https://www.curs-valutar-bnr.ro/preluare-curs-valutar-bnr-script-php) sa fie mai simplu de utilizat...Eu am incercat acest [link-BNR](http://www.bnro.ro/nbrfxrates.xml) direct si am vazut ca functioneaza...deci probabil ca extragerea punctuala pentru o valuta este foarte probabil sa functoneze(parsarea nu este atat de complicata)...
E posibil ca acest curs sa fi folositor pentru [**eFactura**](/https://mfinante.gov.ro/static/10/eFactura/prezentare%20apeluri%20API%20E-factura.pdf) in valuta si in special pentru contabilitate
Ca sa aveti o ***evidenta(adica sa stocati intr-o tabela dintr-o baza de date)*** a cursului valutar al unei **valute** pentru diverse date calendaristice(la acea **data calendaristica din factura**) probabil ca mult mai bine ar fi sa va stocati acest **curs** pentru acea valuta  intr-o [***tabela MySQL***](https://www.heliosdesign.ro/resurse/php/preluare-curs-valutar.htm)
Daca vreti sa-l afisati pe site acest [**cod PhP**](https://www.endd.ro/curs-valutar-pe-site-ul-tau/) s-ar putea sa va ajute
Daca aveti nevoie de **cURL** ca executabil ar fi bine sa-l [***instalati manual***](https://www.digitalocean.com/community/tutorials/workflow-downloading-files-curl);
Recomandarea mea este sa-l instalati si sa-l faceti cunoscut(pt a fi usor regasit cand il chemati intr-o comanda de terminal **cmd.exe**) in variabila de mediu(environment) **%PATH%** pentru ca este util macar pentru a testa un URL (macar atunci cand trebuie sa faceti apeluri **POST**,**PUT**,......pt ca apelurile **GET** pot fi testate direct in ***browser*** tastand **URL**-ul respectiv in campul de adresa);

Pe [ICEsoft](https://icesoft.ro/forum//index.php?topic=699.0) forum s-a postat candva o intrebare legitima in legatura cu [***eFactura***:](https://static.anaf.ro/static/10/Anaf/AsistentaContribuabili_r/Ghid_RO_eFactura.pdf) 

Ce este **XML** [***eFactura***](https://mfinante.gov.ro/web/efactura/informatii-tehnice)?

(Intrebarea de mai sus, desi pe ***jumatate*** pusa este totusi o intrebare!)

**XML** este o forma de prezentare([***arborescenta***](https://copyprogramming.com/howto/how-to-show-tree-view-in-php)) a datelor deci este un standard de prezentare(pana la urma si de stocare in container/fisier) a datelor;
De ce spun ca este pe ***jumatate*** pusa intrebarea?
Pentru ca in cadrul acestul **XML** se foloseste un alt standard de sintaxa a datelor specifice unei ***eFacturi***(de fapt **eInvoice** pt ca este pt un format/standard extins la nivel international)  
si aici ma refer la **UBL** ori **CII**...
Deci standardul **UBL** sau **CII** este inclus(sau gazduit) de acest standard ***general*** **XML**.
Nu a fost o explicatie prea academica dar sper sa fie utila unora mai practicieni(***n.r.*** ca mine)...
De ce spun ca XML este un standard general/comun ? ... pt ca orice se prezinta sub [forma(***paradigma/modelul***)](https://stackoverflow.com/questions/52569580/php-extract-html-tag-value-into-array-from-string) **\<tag\>**...***continut-XML***...**\<\/tag\>** este un format **XML**(daca vreti si continutul unui fisier  **HTML** este un **XML**...cu atat mai mult un continut [***XHTML***](https://copyprogramming.com/howto/php-you-want-to-xhtml-request); adica **HTML**-ul respectiv [***XHTML***](https://copyprogramming.com/t/generating-xhtml-documents-using-domdocument-in-php)-ul este in particular, daca vreti/pana la urma, tot un [**XML**](https://www.php.net/manual/en/class.simplexmliterator.php)...   pt. ca respecta [***paradigma/modelul/formatul***](https://stackoverflow.com/questions/52569580/php-extract-html-tag-value-into-array-from-string) despre care vorbeam mai sus); asadar un XML ne prezinta/reflecta o imbricare(includere/incluziune) sau o containerizare profunda lucru specific structurilor de tip [**arbore**](https://github.com/gymadarasz/xparser)... pe relatii de genul [***contine pe/este imbricat=inclus in***](https://stackoverflow.com/questions/6356115/traverse-the-dom-tree); Daca va asumati acest risc atunci poate ca aceasta ar fi o calea interesanta de urmat!!!

***Nota:*** Am vorbit aici despre ***XHTML*** pt ca paginile-tab ale [**generatorului ANAF**](https://www.anaf.ro/CompletareFactura/faces/factura/informatiigenerale.xhtml) [eFactura](https://www.gandul.ro/financiar/business/fiscalitate/raportarea-facturilor-emise-in-sistemul-national-ro-e-factura-ghid-pentru-firme-si-pasii-de-urmat-20109989) sunt XHTML;

Ce vreau sa spun?

Vrem nu vrem cei ce se ocupa se generatorul sau de site-ul ["completarea online a eFacturii" ](https://www.anaf.ro/CompletareFactura/faces/factura/informatiigenerale.xhtml) sunt cei de la ANAF, asa ca oricand pot introduce noi validari sau noi reguli, pot elimina sau introduce noi campuri deci ei au intreaga decizie asupra site-ului de generare a e-Facturii.Prin urmare si validatorul [validare.js](https://www.anaf.ro/CompletareFactura/faces/factura/validare.js) poate suferi in timp modificari notabile; asadar daca doriti sa faceti un generator xml e-Factura poate ca nu ar fi o idee rea sa folositi mediul acesta de programare si sa-l utilizati desigur in aplicatia dumneavoastra. Pentru acest lucru va trebui sa folositi resursele site-ului in forma lor originala si doar sa le utilizati in aplicatia dumneavoastra.

Asadar poate ar fi util sa analizati in php("parsati") XHTML-urile paginilor-tab, sa le expuneti utilizatorului pe site-ul dvs. si sa preluati ca atare campurile respective(daca aveti interfata utilizator expusa) si de asemenea sa folositi de la distanta validatorul dumnealor plantand in html-head referinta catre acesta(https://www.anaf.ro/CompletareFactura/faces/factura/validare.js);
Astfel sursa dumneavoasta php/html nu va suferi modificari de fiecare data cand aceast site sufera mofificari.(atentie acest generator oficial foloseste [*JSF*](https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.jst.jsf.doc.user%2Fhtml%2Fconcepts%2Fjsf_component_tree.html) deci este bine sa cautati **URL**-urile ***relative*** si sa le transformati in link-uri ***absolute***; acest lucru este valabil/necesar pentru toate resursele utilizate la/de la distanta); Trebuie insa sa mentionez ca aceasta dependenta de resursele rezidente pe platforma ANAF aduce si un lucru mai putin placut si anume acela ca **uptime**-ul aplicatiei dvs **depinde** de uptime-ul site-ului **ANAF**(cel care este titularul de drept al acestor resurse); Cu alte cuvinte cand cade site-ul ANAF atunci veti obtine si dvs rezultate nedorite/[malformate](https://dexonline.ro/definitie/malforma%C8%9Bie);

Daca ***XML***-ul se ocupa de containerizarea arborescenta DOM(Document Object Model) in vederea transportului, atunci **UBL**-ul se ocupa de /explica/descrie/(re-)[prezinta](https://dexonline.ro/definitie/prezinta/810865) reguli de scriere(sintactice), daca vreti se ocupa de regulile [***ontologice***](https://dexonline.ro/definitie/onto)(descrieri existentiale) ale obiectelor/entitatilor documentului/documentelor ce fac obiectul acestui **standard**

Pentru cei care doresc sa-si construiasca programatic(in acest caz, utilizand limbajul **PhP**) propriul generator ***UBL2.1/xml eFactura***(**export date**) probabil ca ar fi util sa aveti in vedere construirea(in sens ***invers***!) si a **importului**(in aplicatia voastra PhP) de facturi ***UBL2.1/xml*** primite de la furnizorii dumneavoastra(a se vedea in acest sens si depozitul **github** [***danielgp/eFactura***](https://github.com/danielgp/eFactura/tree/main) ; versiunea **1.0.0** acoperă citirea și scrierea fișierelor **UBL 2.1./XML**; aceasta prima versiune are inclusă o **interfață grafică** pentru citirea tuturor fișierelor ZIP ca răspunsuri descărcate de la ANAF, interfata care afișează statistici relevante din toate documentele identificate.; aceleasi ***multumiri*** si lui [**Daniel-Popiniuc**](https://packagist.org/packages/danielgp/efactura)!; datele de [intrare](https://raw.githubusercontent.com/danielgp/eFactura/main/testing/UBL_examples/Romanian/Invoice.json) ale generatorului/exportatorului/writer-ului sunt preluate dintr-un fisier [**json**](https://cleartax.in/s/gst-e-invoice-json) si desigur iesirea este un fisier [eFactura UBL2.1/XML](https://github.com/danielgp/eFactura/blob/main/testing/UBL_examples/Romanian/eInvoice_ex.xml) ; insa daca intentionati sa lucrati cu sabloane/**template**-uri(gen [**twig**](https://zetcode.com/php/twig/)) s-ar putea ca acest repos sa constituie doar materie prima si nu o solutie finita in sine!!!; va trebui sa culegeti datele de intrare ale Writer-ului in prelabil si apoi sa-l utilizati; oricum adaptarea/integrarea insa cred/pare ca este destul de usoara!) 

Un alt generator eInvoice in format [**UBL**](https://docs.peppol.eu/poacc/billing/3.0/syntax/ubl-invoice/) poate fi gasit in depozitul github [***num-num/ubl-invoice***](https://github.com/num-num/ubl-invoice/tree/master)(a se vedea [**testele**](https://github.com/num-num/ubl-invoice/tree/master/tests) aferente pt a vedea cum functioneaza); Trebuie doar sa particularizati/nuantati continutul documentele generate pt uzul sau specificul nostru national(**CIUS-RO**); Pentru a afla mai multe despre [**EAS**](https://www.avalara.com/blog/en/europe/2023/03/how-does-your-e-invoice-reach-your-customer-on-the-peppol-network.html?gclid=Cj0KCQiA5rGuBhCnARIsAN11vgT9rAYSPT1VELkaITKv3F2Wb-zJgsDV_VugXTt7b_tKfQzybzgJvNYaAsZuEALw_wcB&CampaignID=7015a000001y34SAAQ&utm_source=paid_search&utm_medium=gppc&ef_id=Cj0KCQiA5rGuBhCnARIsAN11vgT9rAYSPT1VELkaITKv3F2Wb-zJgsDV_VugXTt7b_tKfQzybzgJvNYaAsZuEALw_wcB:G:s&s_kwcid=AL!5131!3!675189240647!p!!g!!peppol&gclsrc=aw.ds&&lso=Paid+Digital&lsmr=Paid+Digital&gad_source=1) - ***Electronic Address Schemes*** (**România** foloseste drept  Număr unic de identificare ca si/de client-tara-***Peppol***, **EAS=9947**, un numar de tip **TVA**, numar folosit pentru toate companiile sale inregistrate la nivel national care formeaza contextul de afaceri **B2**{x}, unde x=**G**,**B**,**C**)  puteti sa  accesati blogul-ul european [**avalara**](https://www.avalara.com/blog/en/europe/2023/03/how-does-your-e-invoice-reach-your-customer-on-the-peppol-network.html?gclid=Cj0KCQiA5rGuBhCnARIsAN11vgT9rAYSPT1VELkaITKv3F2Wb-zJgsDV_VugXTt7b_tKfQzybzgJvNYaAsZuEALw_wcB&CampaignID=7015a000001y34SAAQ&utm_source=paid_search&utm_medium=gppc&ef_id=Cj0KCQiA5rGuBhCnARIsAN11vgT9rAYSPT1VELkaITKv3F2Wb-zJgsDV_VugXTt7b_tKfQzybzgJvNYaAsZuEALw_wcB:G:s&s_kwcid=AL!5131!3!675189240647!p!!g!!peppol&gclsrc=aw.ds&&lso=Paid+Digital&lsmr=Paid+Digital&gad_source=1)(Subiectul lor ***Cum ajunge factura dvs. electronică la clientul dvs. din rețeaua Peppol?*** poate fi foarte atragator pentru cei ce vor sa scufunde mai adanc in cunoasterea ***eFacturii/eInvoice***; Oricum si acest depozit poate fi o sursa de inspiratie pentru proiectele dumneavoastra;

Daca aveti nevoie de informatii privind [**Sedii DGRFP**](https://www.anaf.ro/anaf/internet/ANAF/contact/adrese_unitati_fiscale), adica adresele unitatilor fiscale, puteti cauta pe site-ul ***ANAF***


